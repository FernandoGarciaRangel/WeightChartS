<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Acompanhamento de Peso</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="bg-gray-100 min-h-screen p-8">
    <div class="max-w-4xl mx-auto">
        <h1 class="text-3xl font-bold text-center mb-8 text-gray-800">Acompanhamento de Peso</h1>
        
        <!-- Seleção de Mês -->
        <div class="mb-6">
            <label for="mes" class="block text-sm font-medium text-gray-700 mb-2">Selecione o Mês:</label>
            <select id="mes" class="w-full p-2 border border-gray-300 rounded-md">
                <option value="janeiro">Janeiro</option>
                <option value="fevereiro">Fevereiro</option>
                <option value="marco">Março</option>
                <option value="abril">Abril</option>
                <option value="maio">Maio</option>
                <option value="junho">Junho</option>
                <option value="julho">Julho</option>
                <option value="agosto">Agosto</option>
                <option value="setembro">Setembro</option>
                <option value="outubro">Outubro</option>
                <option value="novembro">Novembro</option>
                <option value="dezembro">Dezembro</option>
            </select>
        </div>

        <!-- Formulário de Registro -->
        <div class="bg-white p-6 rounded-lg shadow-md mb-8">
            <h2 class="text-xl font-semibold mb-4">Registrar Peso</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <label for="semana" class="block text-sm font-medium text-gray-700 mb-2">Semana:</label>
                    <select id="semana" class="w-full p-2 border border-gray-300 rounded-md">
                        <option value="1">Semana 1</option>
                        <option value="2">Semana 2</option>
                        <option value="3">Semana 3</option>
                        <option value="4">Semana 4</option>
                    </select>
                </div>
                <div>
                    <label for="peso" class="block text-sm font-medium text-gray-700 mb-2">Peso (kg):</label>
                    <input type="number" id="peso" step="0.1" class="w-full p-2 border border-gray-300 rounded-md">
                </div>
            </div>
            <button onclick="adicionarPeso()" class="mt-4 bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600">
                Adicionar Registro
            </button>
        </div>

        <!-- Gráfico -->
        <div class="bg-white p-6 rounded-lg shadow-md">
            <h2 class="text-xl font-semibold mb-4">Evolução do Peso</h2>
            <canvas id="graficoPeso"></canvas>
        </div>
    </div>

    <script>
        let registros = JSON.parse(localStorage.getItem('registrosPeso')) || {};
        let grafico = null;

        function adicionarPeso() {
            const mes = document.getElementById('mes').value;
            const semana = document.getElementById('semana').value;
            const peso = parseFloat(document.getElementById('peso').value);

            if (!peso || peso <= 0) {
                alert('Por favor, insira um peso válido!');
                return;
            }

            if (!registros[mes]) {
                registros[mes] = {};
            }
            if (!registros[mes][semana]) {
                registros[mes][semana] = [];
            }

            registros[mes][semana].push({
                peso: peso,
                data: new Date().toLocaleDateString()
            });

            localStorage.setItem('registrosPeso', JSON.stringify(registros));
            atualizarGrafico();
            document.getElementById('peso').value = '';
        }

        function atualizarGrafico() {
            const ctx = document.getElementById('graficoPeso').getContext('2d');
            
            if (grafico) {
                grafico.destroy();
            }

            const dados = [];
            const labels = [];

            Object.keys(registros).sort().forEach(mes => {
                Object.keys(registros[mes]).sort().forEach(semana => {
                    registros[mes][semana].forEach(registro => {
                        labels.push(`${mes} - Semana ${semana}`);
                        dados.push(registro.peso);
                    });
                });
            });

            grafico = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Peso (kg)',
                        data: dados,
                        borderColor: 'rgb(75, 192, 192)',
                        tension: 0.1,
                        fill: false
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: false
                        }
                    }
                }
            });
        }

        // Inicializar o gráfico
        document.addEventListener('DOMContentLoaded', atualizarGrafico);
    </script>
</body>
</html>
